<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>doc.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BusinessObject.html">BusinessObject</a><ul class='methods'><li data-type='method'><a href="BusinessObject.html#action">action</a></li><li data-type='method'><a href="BusinessObject.html#create">create</a></li><li data-type='method'><a href="BusinessObject.html#crosstab">crosstab</a></li><li data-type='method'><a href="BusinessObject.html#del">del</a></li><li data-type='method'><a href="BusinessObject.html#get">get</a></li><li data-type='method'><a href="BusinessObject.html#getCount">getCount</a></li><li data-type='method'><a href="BusinessObject.html#getField">getField</a></li><li data-type='method'><a href="BusinessObject.html#getFieldDataURL">getFieldDataURL</a></li><li data-type='method'><a href="BusinessObject.html#getFieldDocument">getFieldDocument</a></li><li data-type='method'><a href="BusinessObject.html#getFieldDocumentURL">getFieldDocumentURL</a></li><li data-type='method'><a href="BusinessObject.html#getFieldLabel">getFieldLabel</a></li><li data-type='method'><a href="BusinessObject.html#getFieldLinkedList">getFieldLinkedList</a></li><li data-type='method'><a href="BusinessObject.html#getFieldListColors">getFieldListColors</a></li><li data-type='method'><a href="BusinessObject.html#getFieldListValue">getFieldListValue</a></li><li data-type='method'><a href="BusinessObject.html#getFieldType">getFieldType</a></li><li data-type='method'><a href="BusinessObject.html#getFieldValue">getFieldValue</a></li><li data-type='method'><a href="BusinessObject.html#getFields">getFields</a></li><li data-type='method'><a href="BusinessObject.html#getFilters">getFilters</a></li><li data-type='method'><a href="BusinessObject.html#getForCopy">getForCopy</a></li><li data-type='method'><a href="BusinessObject.html#getForCreate">getForCreate</a></li><li data-type='method'><a href="BusinessObject.html#getForDelete">getForDelete</a></li><li data-type='method'><a href="BusinessObject.html#getForUpdate">getForUpdate</a></li><li data-type='method'><a href="BusinessObject.html#getHelp">getHelp</a></li><li data-type='method'><a href="BusinessObject.html#getInstance">getInstance</a></li><li data-type='method'><a href="BusinessObject.html#getLabel">getLabel</a></li><li data-type='method'><a href="BusinessObject.html#getLinks">getLinks</a></li><li data-type='method'><a href="BusinessObject.html#getListColors">getListColors</a></li><li data-type='method'><a href="BusinessObject.html#getListValue">getListValue</a></li><li data-type='method'><a href="BusinessObject.html#getMetaData">getMetaData</a></li><li data-type='method'><a href="BusinessObject.html#getMetadata">getMetadata</a></li><li data-type='method'><a href="BusinessObject.html#getName">getName</a></li><li data-type='method'><a href="BusinessObject.html#getParameter">getParameter</a></li><li data-type='method'><a href="BusinessObject.html#getPath">getPath</a></li><li data-type='method'><a href="BusinessObject.html#getResourceURL">getResourceURL</a></li><li data-type='method'><a href="BusinessObject.html#getRowId">getRowId</a></li><li data-type='method'><a href="BusinessObject.html#getRowIdField">getRowIdField</a></li><li data-type='method'><a href="BusinessObject.html#getRowIdFieldName">getRowIdFieldName</a></li><li data-type='method'><a href="BusinessObject.html#isRowIdField">isRowIdField</a></li><li data-type='method'><a href="BusinessObject.html#isTimestampField">isTimestampField</a></li><li data-type='method'><a href="BusinessObject.html#placemap">placemap</a></li><li data-type='method'><a href="BusinessObject.html#populate">populate</a></li><li data-type='method'><a href="BusinessObject.html#print">print</a></li><li data-type='method'><a href="BusinessObject.html#resetValues">resetValues</a></li><li data-type='method'><a href="BusinessObject.html#save">save</a></li><li data-type='method'><a href="BusinessObject.html#search">search</a></li><li data-type='method'><a href="BusinessObject.html#setFieldValue">setFieldValue</a></li><li data-type='method'><a href="BusinessObject.html#setFieldValues">setFieldValues</a></li><li data-type='method'><a href="BusinessObject.html#setParameter">setParameter</a></li><li data-type='method'><a href="BusinessObject.html#update">update</a></li></ul></li><li><a href="BusinessObjectMetadata.html">BusinessObjectMetadata</a></li><li><a href="Doc.html">Doc</a><ul class='methods'><li data-type='method'><a href="Doc.html#getContent">getContent</a></li><li data-type='method'><a href="Doc.html#getContentAsArrayBuffer">getContentAsArrayBuffer</a></li><li data-type='method'><a href="Doc.html#getContentAsText">getContentAsText</a></li><li data-type='method'><a href="Doc.html#getDataURL">getDataURL</a></li><li data-type='method'><a href="Doc.html#getFileName">getFileName</a></li><li data-type='method'><a href="Doc.html#getFilename">getFilename</a></li><li data-type='method'><a href="Doc.html#getId">getId</a></li><li data-type='method'><a href="Doc.html#getMIMEType">getMIMEType</a></li><li data-type='method'><a href="Doc.html#getMimeType">getMimeType</a></li><li data-type='method'><a href="Doc.html#getName">getName</a></li><li data-type='method'><a href="Doc.html#getThumbnail">getThumbnail</a></li><li data-type='method'><a href="Doc.html#getThumbnailAsArrayBuffer">getThumbnailAsArrayBuffer</a></li><li data-type='method'><a href="Doc.html#getValue">getValue</a></li><li data-type='method'><a href="Doc.html#load">load</a></li><li data-type='method'><a href="Doc.html#setContent">setContent</a></li><li data-type='method'><a href="Doc.html#setContentFromText">setContentFromText</a></li><li data-type='method'><a href="Doc.html#setFileName">setFileName</a></li><li data-type='method'><a href="Doc.html#setFilename">setFilename</a></li><li data-type='method'><a href="Doc.html#setMIMEType">setMIMEType</a></li><li data-type='method'><a href="Doc.html#setMimeType">setMimeType</a></li><li data-type='method'><a href="Doc.html#setName">setName</a></li></ul></li><li><a href="ExternalObject.html">ExternalObject</a><ul class='methods'><li data-type='method'><a href="ExternalObject.html#call">call</a></li><li data-type='method'><a href="ExternalObject.html#callParams">callParams</a></li><li data-type='method'><a href="ExternalObject.html#getName">getName</a></li><li data-type='method'><a href="ExternalObject.html#invoke">invoke</a></li></ul></li><li><a href="ExternalObjectMetadata.html">ExternalObjectMetadata</a></li><li><a href="Grant.html">Grant</a><ul class='methods'><li data-type='method'><a href="Grant.html#T">T</a></li><li data-type='method'><a href="Grant.html#getEmail">getEmail</a></li><li data-type='method'><a href="Grant.html#getFirstName">getFirstName</a></li><li data-type='method'><a href="Grant.html#getFirstname">getFirstname</a></li><li data-type='method'><a href="Grant.html#getLang">getLang</a></li><li data-type='method'><a href="Grant.html#getLastName">getLastName</a></li><li data-type='method'><a href="Grant.html#getLastname">getLastname</a></li><li data-type='method'><a href="Grant.html#getLogin">getLogin</a></li><li data-type='method'><a href="Grant.html#getPictureURL">getPictureURL</a></li><li data-type='method'><a href="Grant.html#getSysParam">getSysParam</a></li><li data-type='method'><a href="Grant.html#getSystemParameter">getSystemParameter</a></li><li data-type='method'><a href="Grant.html#getUserId">getUserId</a></li><li data-type='method'><a href="Grant.html#getUsername">getUsername</a></li><li data-type='method'><a href="Grant.html#hasResponsibility">hasResponsibility</a></li></ul></li><li><a href="Session.html">Session</a><ul class='methods'><li data-type='method'><a href="Session.html#changePassword">changePassword</a></li><li data-type='method'><a href="Session.html#clear">clear</a></li><li data-type='method'><a href="Session.html#compressData">compressData</a></li><li data-type='method'><a href="Session.html#getAppInfo">getAppInfo</a></li><li data-type='method'><a href="Session.html#getBasicAuthHeader">getBasicAuthHeader</a></li><li data-type='method'><a href="Session.html#getBearerTokenHeader">getBearerTokenHeader</a></li><li data-type='method'><a href="Session.html#getBusinessObject">getBusinessObject</a></li><li data-type='method'><a href="Session.html#getBusinessObjectCacheKey">getBusinessObjectCacheKey</a></li><li data-type='method'><a href="Session.html#getDevInfo">getDevInfo</a></li><li data-type='method'><a href="Session.html#getError">getError</a></li><li data-type='method'><a href="Session.html#getExternalObject">getExternalObject</a></li><li data-type='method'><a href="Session.html#getGrant">getGrant</a></li><li data-type='method'><a href="Session.html#getHealth">getHealth</a></li><li data-type='method'><a href="Session.html#getNews">getNews</a></li><li data-type='method'><a href="Session.html#getPath">getPath</a></li><li data-type='method'><a href="Session.html#getResourceURL">getResourceURL</a></li><li data-type='method'><a href="Session.html#getSysInfo">getSysInfo</a></li><li data-type='method'><a href="Session.html#health">health</a></li><li data-type='method'><a href="Session.html#indexSearch">indexSearch</a></li><li data-type='method'><a href="Session.html#isAuthTokenExpired">isAuthTokenExpired</a></li><li data-type='method'><a href="Session.html#login">login</a></li><li data-type='method'><a href="Session.html#logout">logout</a></li><li data-type='method'><a href="Session.html#parseResponse">parseResponse</a></li><li data-type='method'><a href="Session.html#sendRequest">sendRequest</a></li><li data-type='method'><a href="Session.html#setAjaxKey">setAjaxKey</a></li><li data-type='method'><a href="Session.html#setAuthToken">setAuthToken</a></li><li data-type='method'><a href="Session.html#setAuthTokenExpiryDate">setAuthTokenExpiryDate</a></li><li data-type='method'><a href="Session.html#setPassword">setPassword</a></li><li data-type='method'><a href="Session.html#setUsername">setUsername</a></li><li data-type='method'><a href="Session.html#uncompressData">uncompressData</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-simplicite.html">simplicite</a><ul class='methods'><li data-type='method'><a href="module-simplicite.html#~session">session</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#constants">constants</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">doc.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var __awaiter = (this &amp;&amp; this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
/**
 * Document
 * @class
 */
class Doc {
    /**
     * Constructor
     * @param [value] {string|object} Document name or value
     * @param [value.name] Document name
     * @param [value.mime] Document MIME type
     * @param [value.content] Document content
     */
    constructor(value) {
        /**
         * Get the document ID
         * @return {string} ID
         * @function
         */
        this.getId = () => {
            return this.id;
        };
        /**
         * Get the document MIME type
         * @return {string} MIME type
         * @function
         */
        this.getMIMEType = () => {
            return this.mime;
        };
        /**
         * Alias to &lt;code>getMIMEType&lt;/code>
         * @return {string} MIME type
         * @function
         */
        this.getMimeType = this.getMIMEType;
        /**
         * Set the document MIME type
         * @param {string} mime MIME type
         * @return {Doc} This document for chaining
         * @function
         */
        this.setMIMEType = (mime) => {
            this.mime = mime;
            return this; // Chain
        };
        /**
         * Alias to &lt;code>setMIMEType&lt;/code>
         * @param {string} mime MIME type
         * @function
         */
        this.setMimeType = this.setMIMEType;
        /**
         * Get the document name
         * @return {string} Name
         * @function
         */
        this.getName = () => {
            return this.name;
        };
        /**
         * Alias to &lt;code>getName&lt;/code>
         * @return {string} Name
         * @function
         */
        this.getFileName = this.getName;
        /**
         * Alias to &lt;code>getName&lt;/code>
         * @return {string} Name
         * @function
         */
        this.getFilename = this.getName;
        /**
         * Set the document name
         * @param {string} name Name
         * @return {Doc} This document for chaining
         * @function
         */
        this.setName = (name) => {
            this.name = name;
            return this; // Chain
        };
        /**
         * Alias to &lt;code>setName&lt;/code>
         * @param {string} name Name
         * @function
         */
        this.setFileName = this.setName;
        /**
         * Alias to &lt;code>setName&lt;/code>
         * @param {string} name Name
         * @function
         */
        this.setFilename = this.setName;
        /**
         * Get the document content (encoded in base 64)
         * @return {string} Content
         * @function
         */
        this.getContent = () => {
            return this.content;
        };
        /**
         * Get the document thumbnail (encoded in base 64)
         * @return {string} Thumbnail
         * @function
         */
        this.getThumbnail = () => {
            return this.thumbnail;
        };
        /**
         * Get the document content as an array buffer
         * @return {ArrayBuffer} Content as an array buffer
         * @function
         */
        this.getContentAsArrayBuffer = () => {
            return this.getBuffer(this.content).buffer;
        };
        /**
         * Get the document thumbnail as an array buffer
         * @return {ArrayBuffer} Thumbnail as an array buffer
         * @function
         */
        this.getThumbnailAsArrayBuffer = () => {
            return this.getBuffer(this.thumbnail || '').buffer;
        };
        /**
         * Get the document content as a text
         * @return {string} Content as plain text
         * @function
         */
        this.getContentAsText = () => {
            return this.getBuffer(this.content).toString('utf-8');
        };
        /**
         * Set the document content
         * @param {string} content Content (encoded in base 64)
         * @return {Doc} This document for chaining
         * @function
         */
        this.setContent = (content) => {
            this.content = this.cleanContent(content);
            return this; // Chain
        };
        /**
         * Set the document content from plain text string
         * @param {string} content Content as plain text string
         * @return {Doc} This document for chaining
         * @function
         */
        this.setContentFromText = (content) => {
            this.content = Buffer.from(content, 'utf-8').toString('base64');
            return this; // Chain
        };
        /**
         * Get the document data URL
         * @param {boolean} [thumbnail=false] Thumbnail? If thumbnail does not exists the content is used.
         * @return {string} Data URL or nothing if content is empty
         * @function
         */
        this.getDataURL = (thumbnail) => {
            if (this.content)
                return 'data:' + this.mime + ';base64,' + (thumbnail &amp;&amp; this.thumbnail ? this.thumbnail : this.content);
        };
        /**
         * Load file
         * @param file File to load
         * @return {promise&lt;Doc>} A promise to the document
         * @function
         */
        this.load = (file) => __awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve, reject) => {
                try {
                    if (file) {
                        this.name = file.name;
                        this.mime = file.type;
                        const reader = new FileReader();
                        reader.onload = () => {
                            this.content = reader.result ? this.cleanContent(reader.result) : '';
                            resolve(this);
                        };
                        reader.readAsDataURL(file); // this sets the result as a string
                    }
                    else {
                        this.content = '';
                        resolve(this);
                    }
                }
                catch (e) {
                    reject(e);
                }
            });
        });
        /**
         * Get the document as a plain value object
         * @return {object} Value object
         * @function
         */
        this.getValue = () => {
            return {
                id: this.id,
                name: this['filename'] &amp;&amp; !this.name ? this['filename'] : this.name, // Backward compatibility
                mime: this.mime,
                content: this.content,
                thumbnail: this.thumbnail
            };
        };
        Object.assign(this, typeof value == 'string' ? { name: value } : value || {});
        // Backward compatibility
        if (this['filename'] &amp;&amp; !this.name) {
            this.name = this['filename'];
            this['filename'] = undefined;
        }
    }
    cleanContent(content) {
        return content.startsWith('data:') ? content.replace(/data:.*;base64,/, '') : content;
    }
    /**
     * Get the document content as a buffer
     * @param {any} data Content data
     * @return {buffer} Content data as buffer
     * @private
     */
    getBuffer(data) {
        return Buffer.from(data, 'base64');
    }
}
export { Doc };
//# sourceMappingURL=doc.js.map</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a> on Tue May 20 2025 18:24:52 GMT+0200 (heure d’été d’Europe centrale) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
